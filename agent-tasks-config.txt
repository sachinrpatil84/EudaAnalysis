# Cloud.ai Multi-Agent System - Detailed Agent Tasks
# Trading System Requirements Generator

tasks:
  CoordinatorAgent:
    - task_id: "initiate_analysis"
      description: "Begin the workflow by identifying new exchange requirement documents that need processing"
      actions:
        - "Query vector database for newly added exchange requirement documents"
        - "Determine document priority based on exchange and requirement criticality"
        - "Create analysis request with document identifiers and processing instructions"
      inputs:
        - "document_id: The identifier of the new exchange requirement document"
        - "document_metadata: Basic metadata about the document type and source"
      outputs:
        - "analysis_request: Structured request for document analysis with priority information"
      success_criteria: "Valid analysis request created with all necessary context for the processor agent"
    
    - task_id: "delegate_document_generation"
      description: "Review extracted exchange requirements and delegate document creation"
      actions:
        - "Validate completeness of extracted requirements from ExchangeRequirementProcessor"
        - "Augment requirement data with contextual information if needed"
        - "Formulate document generation instructions for TradingSystemAnalyst"
      inputs:
        - "requirement_changes: JSON structure containing extracted exchange requirement changes"
        - "analysis_metadata: Information about the analysis process and confidence levels"
      outputs:
        - "document_generation_request: Enhanced requirements data with specific instructions for document creation"
      success_criteria: "Complete and validated requirement data prepared for document generation"
    
    - task_id: "review_and_finalize"
      description: "Review generated requirement document and finalize for delivery"
      actions:
        - "Evaluate document completeness against standard templates"
        - "Verify all identified requirements are properly addressed"
        - "Ensure success criteria are specific, measurable, and aligned with business needs"
        - "Add any final notes or recommendations"
      inputs:
        - "draft_document: The requirement document generated by TradingSystemAnalyst"
      outputs:
        - "final_document: The reviewed and finalized requirement document"
        - "review_notes: Notes on any modifications made during review"
      success_criteria: "Document meets all organizational standards and addresses all identified requirements"

  ExchangeRequirementProcessor:
    - task_id: "analyze_new_requirements"
      description: "Extract and structure new exchange requirements from PDF documents"
      actions:
        - "Read and parse PDF document from vector database"
        - "Identify sections containing requirement specifications"
        - "Extract individual requirements with their identifiers"
        - "Compare with previous versions to identify changes"
        - "Classify impact level of each requirement change"
      inputs:
        - "analysis_request: Request containing document identifiers and processing instructions"
        - "pdf_content: The raw content of the exchange requirement PDF document"
      outputs:
        - "requirement_changes: Structured JSON containing all identified requirement changes"
        - "analysis_metadata: Information about the extraction process, including confidence scores"
      success_criteria: "All requirements successfully extracted with correct identification of changes from previous versions"
    
    - task_id: "validate_requirements"
      description: "Ensure extracted requirements are complete and consistent"
      actions:
        - "Verify all document sections have been processed"
        - "Check for internal consistency across requirements"
        - "Identify potential conflicts or dependencies between requirements"
        - "Detect ambiguities in requirement specifications"
      inputs:
        - "requirement_changes: The initial structured requirements data"
      outputs:
        - "validated_requirements: Requirements with validation status and annotations"
        - "validation_issues: List of any identified inconsistencies or ambiguities"
      success_criteria: "All requirements validated with any issues clearly identified for attention"

  TradingSystemAnalyst:
    - task_id: "analyze_system_impact"
      description: "Analyze impact of new requirements on existing trading systems"
      actions:
        - "Query trading system specifications from vector database"
        - "Map requirements to affected system components"
        - "Determine scope and scale of changes needed"
        - "Identify potential risks or dependencies"
      inputs:
        - "validated_requirements: The validated exchange requirements"
        - "system_specifications: Current trading system architecture and capabilities"
      outputs:
        - "impact_analysis: Detailed breakdown of systems and components affected"
        - "risk_assessment: Identification of potential implementation risks"
      success_criteria: "Complete mapping of requirements to system components with accurate impact assessment"
    
    - task_id: "generate_requirement_document"
      description: "Create comprehensive requirement document based on impact analysis"
      actions:
        - "Formulate problem statements for each requirement area"
        - "Document systems and components impacted"
        - "Detail specific requirements with technical specifications"
        - "Define success criteria for implementation"
        - "Provide implementation considerations and approaches"
      inputs:
        - "document_generation_request: Enhanced requirements with generation instructions"
        - "impact_analysis: The analysis of systems affected by the requirements"
        - "risk_assessment: Identified implementation risks"
      outputs:
        - "draft_document: Complete requirement document in markdown format"
      success_criteria: "Well-structured document that clearly communicates all requirements and their implications"
    
    - task_id: "refine_document"
      description: "Refine requirement document based on feedback"
      actions:
        - "Process feedback from CoordinatorAgent"
        - "Update document sections as needed"
        - "Add clarifications or additional details requested"
        - "Realign success criteria with business objectives if needed"
      inputs:
        - "review_feedback: Feedback from document review"
        - "draft_document: The initial requirement document"
      outputs:
        - "revised_document: Updated document incorporating all feedback"
      success_criteria: "All feedback addressed with appropriate document revisions"

workflows:
  standard_flow:
    - CoordinatorAgent.initiate_analysis
    - ExchangeRequirementProcessor.analyze_new_requirements
    - ExchangeRequirementProcessor.validate_requirements
    - TradingSystemAnalyst.analyze_system_impact
    - TradingSystemAnalyst.generate_requirement_document
    - CoordinatorAgent.review_and_finalize
  
  revision_flow:
    - CoordinatorAgent.review_and_finalize
    - TradingSystemAnalyst.refine_document
    - CoordinatorAgent.review_and_finalize
